# **Car QR Service**

Це мій перший навчальний проєкт на FastAPI, мета якого — створити корисний сервіс, 
вивчити FastAPI та отримати задоволення від процесу.

## **Для розробників**

Ця інструкція допоможе вам налаштувати проєкт локально для розробки.

### **1. Початкове налаштування**

Вимоги:

Встановлений Python 3.10+

Встановлений менеджер пакетів Poetry

Кроки:

Клонуйте репозиторій:

`git clone <URL вашого репозиторію>`
`cd car_qr_service`

Встановіть залежності:
Ця команда створить віртуальне оточення та встановить усі необхідні бібліотеки з файлу pyproject.toml.

`poetry install`

Налаштуйте змінні оточення:
Створіть файл **.env** у кореневій директорії проєкту. Найпростіше це зробити, скопіювавши файл-приклад:

`cp .env.example .env`

Потім згенеруйте секретний ключ для JWT-токенів:

`poetry run python -c "import secrets; print(secrets.token_hex(32))"`

Відкрийте файл .env і вставте згенерований ключ у змінну **JWT_SECRET_KEY**.

### **2. Налаштування бази даних (Alembic)**

Alembic — це наш інструмент для керування версіями схеми бази даних.

Ініціалізація Alembic (виконується лише один раз):
Якщо в проєкті ще немає папки alembic, виконайте цю команду:

`poetry run alembic init -t async alembic`

_**-t async**_ — шаблон для асинхронних проєктів.

Конфігурація alembic.ini:
Переконайтесь, що в файлі alembic.ini рядок sqlalchemy.url відповідає шляху до вашої БД 
(зазвичай він береться з налаштувань, тому цей крок можна пропустити, якщо env.py налаштований правильно).

Конфігурація alembic/env.py:
Alembic повинен знати про наші моделі SQLAlchemy. 
Переконайтесь, що файл alembic/env.py налаштований на автоматичне зчитування метаданих з Base нашого проєкту. 
Детальний код для цього кроку зазвичай вже є в репозиторії.

Застосування міграцій:
Щоб створити всі таблиці в базі даних, виконайте:

`poetry run alembic upgrade head`

Ця команда застосує всі існуючі міграції.

### **3. Запуск застосунку**

Для запуску веб-сервера виконайте команду:

`poetry run uvicorn src.car_qr_service.main:app --reload --port 8001`

_**--reload**_ автоматично перезавантажить сервер при зміні коду.

**_--port 8001_** вказує порт для запуску.

Після запуску API буде доступний за адресою http://127.0.0.1:8001, 
а інтерактивна документація — http://127.0.0.1:8001/docs.

### **4. Запуск тестів**

Для запуску всіх автоматичних тестів виконайте команду:

`poetry run pytest`